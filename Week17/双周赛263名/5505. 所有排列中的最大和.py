# 5505. 所有排列中的最大和.py
from typing import List


class Solution:
    def maxSumRangeQuery(self, nums: List[int],
                         requests: List[List[int]]) -> int:
        n = len(nums)
        a = [0] * (n + 1)
        for l, r in requests:
            a[l] += 1
            a[r + 1] -= 1
        for i in range(1, n + 1):
            a[i] = a[i] + a[i - 1]
        a.sort()
        nums.sort()
        res = 0
        for i in range(n, 0, -1):
            res += nums[i - 1] * a[i]
        return res % 1000000007


def main():
    sol = Solution()
    nums = [1, 2, 3, 4, 5]
    requests = [[1, 3], [0, 1]]
    res = sol.maxSumRangeQuery(nums, requests)
    print(res)

    nums = [1, 8, 5, 5, 2]
    requests = [[4, 4], [3, 4], [4, 4], [2, 4], [0, 0]]
    res = sol.maxSumRangeQuery(nums, requests)
    print(res)
    assert res == 49
    nums = [22230, 66149, 11949, 25437, 54944, 33382, 29973, 41147, 80679,
            55466, 73368, 57815, 41278, 68116, 51023, 88259, 45351, 62270,
            21061, 97569, 19934, 6733, 92198, 61187, 55995, 95507, 62758, 74402,
            14322, 36174, 37028, 67252, 48460, 5544, 68843, 2611, 25727, 82936,
            6842, 15445, 56880, 27090, 76413, 28755, 74224, 62428, 85579, 64382,
            41586, 95911, 28176, 27566, 86760, 10651, 17411, 39861, 92391,
            14850, 65976, 59216, 37922, 69699, 25707, 79889, 43195, 9354, 23000,
            28315, 8440, 23122, 95479, 38521, 84228, 78333, 22637, 31002, 44039,
            83922, 80231, 10140, 89580, 43188]
    requests = [[79, 80], [43, 78], [73, 81], [13, 14], [9, 44], [34, 79],
                [18, 49], [50, 74],
                [46, 77], [21, 64], [32, 80], [59, 81], [9, 52], [25, 40],
                [39, 66], [63, 72], [28, 46], [21, 29], [30, 52], [43, 62],
                [69, 80], [20, 34], [31, 66], [72, 76], [3, 58], [34, 72],
                [78, 81], [61, 70], [46, 56], [47, 48], [56, 73], [61, 65],
                [50, 77], [30, 42], [66, 66], [19, 81], [26, 69], [28, 39],
                [71, 80], [32, 78], [44, 61], [10, 16], [51, 61], [16, 17],
                [10, 47], [30, 54], [12, 14], [65, 78], [63, 77], [68, 76],
                [23, 59], [11, 80], [31, 42], [66, 68], [33, 47], [42, 65],
                [29, 30], [54, 73], [38, 60], [5, 50], [4, 59], [66, 81],
                [6, 79], [51, 66], [14, 59], [24, 76], [6, 61], [61, 64],
                [39, 46], [49, 63], [67, 74], [55, 78], [77, 80], [54, 67],
                [66, 69], [0, 48], [9, 27], [45, 69], [15, 57], [15, 27],
                [52, 64], [70, 76]]
    res = sol.maxSumRangeQuery(nums, requests)
    print(res)
    assert res == 115092300


if __name__ == '__main__':
    main()
